---
title: "Data Visualization"
author: "Elke Windschitl"
date: "2022-08-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, warning = FALSE)
library(tidyverse)
library(here)
library(janitor)

library(patchwork)
library(ggrepel)
library(gghighlight)
library(paletteer)
library(ggExtra)
library(ggbeeswarm)

library(gapminder)

#library(sf)
```

### Read in lizard data

```{r}
lizards <- read_csv(here("data_tidy", "lizards.csv"))
```

Make a scatter plot of total length by weight

```{r}
ggplot(data = lizards, aes(x = total_length, y = weight)) +
  geom_point()
# Aes can go in geom and it makes the same thing
ggplot(data = lizards) +
  geom_point(aes(x = total_length, y = weight))
```

Create a histogram of total lengths for all lizards in the dataset

`bins =` in the geom sets the number of bins

```{r}
plot_1 <- ggplot(data = lizards, aes(x = total_length)) +
  geom_histogram(bins = 15, 
                 color = "orange",
                 fill = "purple",
                 size = 0.5,
                 linetype = "dotted")

plot_1
```

`geom_point(shape =)` changes shape of points (1-25)

```{r}
ggplot(data = lizards, aes(x = total_length, 
                           y = weight)) +
  geom_point(shape = 22,
             color = "cyan4",
             fill = "yellow",
             size = 4,
             alpha = 0.4)
```

```{r}
ggplot(data = lizards, aes(x = total_length, 
                           y = weight)) +
  geom_point(aes(color = common_name, 
                 size = total_length),
             alpha = 0.5) +
  theme_minimal()
```

Use `scales = "free"` in facet_wrap to make the scale NOT CONSISTENT across graphs (usually not the best)

```{r}
ggplot(data = lizards, aes(x = total_length, 
                           y = weight)) +
  geom_point(aes(color = common_name)) +
  facet_wrap(~common_name, scales = "free")
```

Total counts of lizards by name

```{r}
lizard_counts <- lizards |> 
  group_by(common_name) |> 
  summarise(counts = n())

# OR

lizard_counts2 <- lizards |> 
  count(common_name)
```

Make a column graph (bar plot)
ggplot default is to plot in alphabetic order - must convert to factor using `fct_reorder()`

```{r}
ggplot(data = lizard_counts, 
       aes(y = fct_reorder(common_name, counts), 
           x = counts)) + 
  geom_col(fill = "purple") +
  labs(x = "Count", y = "Common Name")
```

Create a scatterplots, faceted by species for total length versus weight. The color and shape of points should differ based on the species (common name). Change the theme. Make each faceted panel have flexible axis limits.

```{r}
ggplot(data = lizards, aes(x = total_length,
       y = weight)) +
  geom_point(aes(color = common_name, 
                 shape = common_name),
             alpha = 8,
             size = 1) +
  theme_dark() +
  facet_wrap(~common_name, scales = "free") +
  labs(x = "Total length (mm)",
       y = "Weight (g)",
       title = "Jornada Basin lizard sizes",
       subtitle = "All lizards folow the standard length-weight relationship, with Western Whiptails being largest",
       caption = "Data: Jornada Basin LTER CCBY")
```

